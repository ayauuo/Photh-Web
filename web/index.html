<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <title>PhotoBooth</title>
    <link rel="stylesheet" href="css/main.css" />
  </head>
  <body>





    <!-- 待機畫面 -->
    <div id="screen-idle" class="screen active"></div>
    <!-- 待機畫面 -->

    <!-- 測試面板浮層：任一頁面連按兩次空白鍵可開啟／關閉 -->
    <div id="test-panel-overlay" class="test-panel test-panel--hidden">
      <div class="test-panel__buttons">
        <button class="btn primary" id="btn-test-payment">測試：回待機畫面</button>
        <button class="btn primary" id="btn-test-template">測試：選版型畫面</button>
        <button class="btn primary" id="btn-test-shoot">測試：拍照畫面</button>
        <button class="btn primary" id="btn-test-shoot-preview">測試：拍照預覽畫面</button>
        <button class="btn primary" id="btn-test-result">測試：結果畫面</button>
        <button class="btn primary" id="btn-test-processing">測試：列印中畫面</button>
        <button class="btn primary" id="btn-quick-print" style="background-color: #28a745; font-size: 18px; padding: 15px 30px; margin-top: 10px;">直接拍照並列印</button>
      </div>
    </div>


    <!-- 選版型畫面（背景用 chooselayout/background.png，中間版型列表用 code） -->
    <div id="screen-template" class="screen">
      <div class="screen-template__scroll">
        <div class="screen-template__grid" id="template-list"></div>
      </div>
      <!-- 自訂確認彈窗 msgbox（是否要使用這個版型） -->
      <div id="template-msgbox" class="screen-template__msgbox screen-template__msgbox--hidden">
        <div class="screen-template__msgbox-backdrop"></div>
        <div class="screen-template__msgbox-window">
          <img class="screen-template__msgbox-window-bg" src="assets/templates/chooselayout/msgbox/window.png" alt="" />
          <div class="screen-template__msgbox-btns">
            <button type="button" class="screen-template__msgbox-btn screen-template__msgbox-btn--confirm" id="template-msgbox-confirm" aria-label="確認">
              <img src="assets/templates/chooselayout/msgbox/confirm.png" alt="確認" />
            </button>
            <button type="button" class="screen-template__msgbox-btn screen-template__msgbox-btn--repeat" id="template-msgbox-repeat" aria-label="重選">
              <img src="assets/templates/chooselayout/msgbox/repeat.png" alt="重選" />
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- 拍照畫面：請在此實作 -->
    <div id="screen-shoot" class="screen">

      <div class="screen-shoot__content">
      <div class="left-panel">
        <div class="thumb-wrapper">
          <div class="thumb-frame">
            <img id="shoot-page-1" class="shoot-page" alt="縮圖 1" src="assets/templates/ShootPage/bk04/bk04_view01.png" />
            
          </div>
          <div class="thumb-frame">
            <img id="shoot-page-2" class="shoot-page" alt="縮圖 2" src="assets/templates/ShootPage/bk04/bk04_view02.png" />
          </div>
          <div class="thumb-frame">
            <img id="shoot-page-3" class="shoot-page" alt="縮圖 3" src="assets/templates/ShootPage/bk04/bk04_view03.png" />
          </div>
          <div class="thumb-frame">
            <img id="shoot-page-4" class="shoot-page" alt="縮圖4" src="assets/templates/ShootPage/bk04/bk04_view04.png" />
          </div>
        </div>
      </div>
      <div class="right-panel">

        <h1 ;">請看上方鏡頭</h1>

        <div class="picture-area">
          <div id="shoot-countdown" class="shoot-countdown" aria-hidden="true"></div>
          <div class="cover"></div>
          <video id="camera" src=""></video>
        </div>
        <div class="btns">
          <button class="again-btn shoot-btn"></button>
          <button class="next-btn shoot-btn"></button>
        </div>
        
      </div>
      </div>
    </div>

    <!-- 拍照預覽畫面 -->
    <div id="screen-shoot-preview" class="screen shoot-preview-screen">
      <div class="shoot-preview-content">
        <div class="shoot-preview-grid" id="shoot-preview-grid">
          <img id="preview-img-0" class="shoot-preview-img" alt="預覽 1" />
          <img id="preview-img-1" class="shoot-preview-img" alt="預覽 2" />
          <img id="preview-img-2" class="shoot-preview-img" alt="預覽 3" />
          <img id="preview-img-3" class="shoot-preview-img" alt="預覽 4" />
        </div>
        <div class="shoot-preview-actions">
          <button class="btn primary" id="btn-shoot-preview-next">下一步</button>
        </div>
      </div>
    </div>

    <!-- 結果畫面 -->
    <div id="screen-result" class="screen">
      <div class="result-wrap">
        <div class="result-preview">
          <img id="final-preview" alt="final preview" />
        </div>
        <div class="qr-panel">
          <div class="qr-title">掃描QRcode儲存照片</div>
          <div class="qr-frame">
            <img id="qr-image" alt="qr code" />
            <div id="qr-text" class="qr-text"></div>
          </div>
          <div class="print-section">
            <div class="input-row" style="margin-bottom: 8px;">
              <label for="copies" style="color: #333; font-size: 14px;">列印數量</label>
              <input id="copies" type="number" min="1" max="5" value="1" style="font-size: 14px; padding: 4px 8px;" />
            </div>
            <div class="print-button-wrapper" id="btn-print-wrapper">
              <img src="assets/templates/QRcodePage/printbutton.png" alt="列印按鈕" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 列印中畫面 -->
    <div id="screen-processing" class="screen">
      <div class="processing-content">
        <p class="processing-message">這頁是列印中</p>
        <!-- <img src="assets/templates/common/image_processing.png" alt="列印中" class="processing-image" /> -->
      </div>
    </div>

    <!-- Global Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display:none;">
      <div class="spinner"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/glfx@0.0.4/glfx.js"></script>
    <script src="js/app.js"></script>
    <script src="js/take-picture.js"></script>
    <script src="js/fortest/test-panel.js"></script>
    <script src="js/fortest/dev-start-page.js"></script>
  </body>
</html>
